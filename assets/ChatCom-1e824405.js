import{d as S,r as c,a5 as b,u as L,s as B,c as l,b as e,e as D,v as I,f,t as m,m as M,F as T,z,K as x,a6 as R,o as a,p as V,h as $,_ as F}from"./index-319a5c0a.js";const n=d=>(V("data-v-4cba587a"),d=d(),$(),d),N={style:{width:"90%","max-width":"700px"}},j={class:"mdui-col-xs-10 mdui-textfield"},A={class:"mdui-row-xs-1 mdui-col-xs-1"},E={class:"mdui-icon material-icons"},K={class:"icon",style:{width:"1em",height:"1em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4602"},O=n(()=>e("path",{d:"M955 125.6c-4.5-12.5-15.4-21.8-28.6-24.2-9.2-1.7-18.4 0.1-26.1 4.8L83.9 544.3c-12.8 6.8-20.6 20.6-19.8 35.1 0.8 14.3 9.9 27.3 23.2 32.9l238.5 97.9c12.4 5.2 26.8 3.4 37.5-4.9s16.1-21.3 14.4-34.8c-1.6-13.2-10.4-24.6-23-29.9l-165-67.7 573-307.3-357 421.9c-6.5 7.7-9.6 17.4-8.8 27.4L411.4 884c1.6 19.7 17.7 34.6 37.5 34.6 9.5 0 18.7-3.7 25.8-10.4l74-69.2 0.1-0.1c13.5-13.2 15.2-33.5 4.8-48.4l222.6 72c4 1.3 7.9 2 11.7 2 18.2 0 33.8-12.9 37-30.6l131.6-688.3h-0.1c1.4-6.6 0.9-13.5-1.4-20zM497.3 783.8L479.9 800l-6.5-75.9L856 271.6l-96.8 506.3L539 706.6c-19.7-6.4-41.1 4.4-47.5 24.2-5.8 17.9 2.5 37.1 18.9 45.4-4.7 1.5-9.2 4-13.1 7.6z","p-id":"4603"},null,-1)),U=[O],q=n(()=>e("br",null,null,-1)),G={class:"mdui-row-xs-1"},H={class:"mdui-col"},J=n(()=>e("br",null,null,-1)),P={class:"mdui-col-xs-12 mdui-row-xs-1 mdui-card mdui-hoverable"},Q=n(()=>e("div",{class:"mdui-card-header mdui-row"},[e("div",{class:"mdui-card-header-title"},[e("h4",null,"聊天记录")])],-1)),W={class:"mdui-card-content"},X={key:0},Y={key:0,class:"snackbar-me"},Z={key:1,class:"snackbar-bot"},ee=n(()=>e("br",null,null,-1)),te=n(()=>e("br",null,null,-1)),se=n(()=>e("br",null,null,-1)),oe=n(()=>e("div",{class:"mdui-card-header-subtitle"},null,-1)),ne=S({__name:"ChatCom",setup(d){const r=c(b("dataRes")),w=c(b("getData")),g=L(),{settings:C,chatgpt:u}=B(g),v=C.value.skey,i=c(""),_=c({}),k=c(t=>{if(!v){x("请先在设置里填写Skey!","red");return}u.value.push([0,t.content]),w.value({content:t.content,apikey:v}),i.value=""}),y=c(t=>{r.value={},u.value.push([1,t.content])}),h=(t,o)=>{typeof t=="string"&&(y.value({content:t}),o=t,t=R.handler(t));const s=t.next();if(s.done===!1){_.value[o]=_.value[o]?_.value[o]+=s.value:s.value;let p=.2*1e3;s.value.length>50&&(p=20),setTimeout(()=>h(t,o),p)}};return(t,o)=>(a(),l("div",N,[e("div",j,[D(e("input",{class:"mdui-textfield-input","onUpdate:modelValue":o[0]||(o[0]=s=>i.value=s),placeholder:"消息内容"},null,512),[[I,i.value]])]),e("div",A,[e("button",{class:"mdui-btn btn",onClick:o[1]||(o[1]=s=>i.value?k.value({content:i.value}):f(x)(1))},[e("i",E,[(a(),l("svg",K,U))])])]),q,e("div",G,[e("div",H,[e("button",{onClick:o[2]||(o[2]=s=>u.value=[]),class:"mdui-btn mdui-btn-block mdui-btn-raised mdui-color-red mdui-ripple"},"清除聊天记录")])]),J,e("div",P,[Q,e("div",W,[typeof r.value.created=="number"?(a(),l("span",X,m(h(r.value.choices[0].message.content)),1)):M("",!0),(a(!0),l(T,null,z(f(u),s=>(a(),l("div",{key:s},[s[0]===0?(a(),l("span",Y," 我: "+m(s[1]),1)):(a(),l("span",Z," BOT: "+m(_.value[s[1]]),1)),ee,te]))),128))]),se,oe])]))}});const ae=F(ne,[["__scopeId","data-v-4cba587a"]]);export{ae as default};
